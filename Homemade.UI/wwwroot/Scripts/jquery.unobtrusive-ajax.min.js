!function (t) { var a = "unobtrusiveAjaxClick", e = "unobtrusiveAjaxClickTarget", r = "unobtrusiveValidation"; function n(t, a) { for (var e = window, r = (t || "").split("."); e && r.length;)e = e[r.shift()]; return "function" == typeof e ? e : (a.push(t), Function.constructor.apply(null, a)) } function i(t) { return "GET" === t || "POST" === t } function u(a, e, r) { var n; -1 === r.indexOf("application/x-javascript") && (n = (a.getAttribute("data-ajax-mode") || "").toUpperCase(), t(a.getAttribute("data-ajax-update")).each(function (a, r) { var i; switch (n) { case "BEFORE": i = r.firstChild, t("<div />").html(e).contents().each(function () { r.insertBefore(this, i) }); break; case "AFTER": t("<div />").html(e).contents().each(function () { r.appendChild(this) }); break; case "REPLACE-WITH": t(r).replaceWith(e); break; default: t(r).html(e) } })) } function o(a, e) { var r, o, c, d; (r = a.getAttribute("data-ajax-confirm")) && !window.confirm(r) || (o = t(a.getAttribute("data-ajax-loading")), d = parseInt(a.getAttribute("data-ajax-loading-duration"), 10) || 0, t.extend(e, { type: a.getAttribute("data-ajax-method") || void 0, url: a.getAttribute("data-ajax-url") || void 0, cache: !!a.getAttribute("data-ajax-cache"), beforeSend: function (t) { var e; return function (t, a) { !i(a) && t.setRequestHeader("X-HTTP-Method-Override", a) }(t, c), !1 !== (e = n(a.getAttribute("data-ajax-begin"), ["xhr"]).apply(a, arguments)) && o.show(d), e }, complete: function () { o.hide(d), n(a.getAttribute("data-ajax-complete"), ["xhr", "status"]).apply(a, arguments) }, success: function (t, e, r) { u(a, t, r.getResponseHeader("Content-Type") || "text/html"), n(a.getAttribute("data-ajax-success"), ["data", "status", "xhr"]).apply(a, arguments) }, error: function () { n(a.getAttribute("data-ajax-failure"), ["xhr", "status", "error"]).apply(a, arguments) } }), e.data.push({ name: "X-Requested-With", value: "XMLHttpRequest" }), i(c = e.type.toUpperCase()) || (e.type = "POST", e.data.push({ name: "X-HTTP-Method-Override", value: c })), t.ajax(e)) } function c(a) { var e = t(a).data(r); return !e || !e.validate || e.validate() } t(document).on("click", "a[data-ajax=true]", function (t) { t.preventDefault(), o(this, { url: this.href, type: "GET", data: [] }) }), t(document).on("click", "form[data-ajax=true] input[type=image]", function (e) { var r = e.target.name, n = t(e.target), i = t(n.parents("form")[0]), u = n.offset(); i.data(a, [{ name: r + ".x", value: Math.round(e.pageX - u.left) }, { name: r + ".y", value: Math.round(e.pageY - u.top) }]), setTimeout(function () { i.removeData(a) }, 0) }), t(document).on("click", "form[data-ajax=true] :submit", function (r) { var n = r.currentTarget.name, i = t(r.target), u = t(i.parents("form")[0]); u.data(a, n ? [{ name: n, value: r.currentTarget.value }] : []), u.data(e, i), setTimeout(function () { u.removeData(a), u.removeData(e) }, 0) }), t(document).on("submit", "form[data-ajax=true]", function (r) { var n = t(this).data(a) || [], i = t(this).data(e), u = i && i.hasClass("cancel"); r.preventDefault(), (u || c(this)) && o(this, { url: this.action, type: this.method || "GET", data: n.concat(t(this).serializeArray()) }) }) }(jQuery);